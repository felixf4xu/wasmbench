use wasm_bindgen::prelude::*;
use chrono::Local;
use web_sys::console;

#[wasm_bindgen(start)]
pub fn web_bench() {
    let begin = Local::now();

    // Call getElementById and modify the content of an HTML element
    let document = web_sys::window().unwrap().document().unwrap();
    let container = document.get_element_by_id("container").unwrap();

    while container.last_child().is_some()  {
        let _ = container.remove_child(&container.last_child().unwrap());
    }

        for _i in 0..10000 {
            let inner_str = "1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890
            123456789012345678901234567890123456abcd123456789012345678901234567890123456789012345678901234567890
            1234567890123456789012345678901234567890123456789012345678哈哈1234567890123456789012345678901234567890
            1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890
            1234567890123456789012345678901234567890123456789哈哈2345678901234567890123456789012345678901234567890
            1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890
            1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890
            1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890
            123456789012345678901234567890123456789012345678901234567890123嘻嘻67890123456789012345678901234567890
            12345678901234567890123456789012345678901234哈哈哈012345678901234567890123456789012345678901234567890";
        

            let p = document.create_element("p").unwrap();
            p.set_inner_html(inner_str);

            let _ = container.append_child(&p);
        }

    let now = Local::now();
    let time = now.signed_duration_since(begin);
    console::log_2(&now.to_string().into(), &time.num_milliseconds().into());
}
